<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.75">
  <title>ÛŒØ§Ø¯Ø¨ÙˆØ¯ Ù…Ø±Ø­ÙˆÙ… Ø³Ø±Ù‡Ù†Ú¯ Ù…Ø­Ù…Ø¯ ØµØ¯Ø§Ù‚Øª Ú©ÛŒØ´</title>
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
  <style>
    body {
      font-family: "Vazirmatn", sans-serif;
      background-color: #f3f2ef;
      margin: 0;
      padding: 0;
      text-align: center;
      direction: rtl;
    }
    header {
      background-color: #2f3640;
      color: white;
      padding: 20px;
      font-size: 22px;
    }

    /* gallery */
    .gallery {
      /* position: relative;
      max-width: 500px;
      margin: 16px auto;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);*/
      position: relative;
      width: 500px;
      height: 600px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 16px auto;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      border-radius: 10px;
    }
    .gallery img {
      /*width: 100%;
      height: 320px;
      object-fit: cover;
      display: none;*/
      width: 100%;
      height: 100%;
      object-fit: cover; /* Keeps aspect ratio, no cropping */
      display: none;
      object-position: top;
    }

    .gallery img.active {
      display: block;
    }
    .gallery .nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      cursor: pointer;
      background: rgba(0,0,0,0.35);
      color: #fff;
      font-size: 20px;
    }
    .gallery .prev { right: 10px; }
    .gallery .next { left: 10px; }

    button {
      background-color: #353b48;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover {
      background-color: #718093;
    }
    .audio-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 25px auto;
      width: 90%;
      max-width: 500px;
      text-align: right;
    }
    .audio-section h3 {
      margin-top: 0;
      color: #2f3640;
    }
    audio {
      width: 100%;
      margin-top: 10px;
    }
    .counter {
      font-size: 14px;
      color: #555;
      margin-top: 8px;
    }
    .count-btn {
      margin-top: 10px;
      background-color: #27ae60;
    }
    .count-btn:hover {
      background-color: #2ecc71;
    }

    /* ØµÙ„ÙˆØ§Øª */
    .salavat-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 25px auto;
      width: 90%;
      max-width: 500px;
      text-align: center;
    }
    .salavat-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .salavat-buttons button {
      flex: 1;
      padding: 8px 0;
    }

    .popup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    .popup-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      width: 280px;
    }
    .popup-content h4 {
      margin-top: 0;
    }
    .popup-content input {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      text-align: center;
    }
    .popup-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    .popup-buttons button {
      width: 48%;
      padding: 8px 0;
    }
    .btn-green {
      background-color: #27ae60;
    }
    .btn-gray {
      background-color: #7f8c8d;
    }

    /* Ø²Ù†Ø¯Ú¯ÛŒâ€ŒÙ†Ø§Ù…Ù‡ */
    .bio-section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 25px auto;
      width: 90%;
      max-width: 600px;
      text-align: justify;
      line-height: 1.8;
      font-size: 15px;
    }
    .bio-section h2 {
      text-align: center;
      color: #2f3640;
    }

    footer {
      background: #2f3640;
      color: white;
      padding: 15px;
      font-size: 14px;
      margin-top: 40px;
    }

    /* ÙˆÙ‚ØªÛŒ Ù¾Ø§Ù¾â€ŒØ¢Ù¾ Ø¨Ø§Ø²Ù‡ØŒ Ù¾Ù„ÛŒØ±Ù‡Ø§ÛŒ ØµÙˆØªÛŒ Ù…Ø®ÙÛŒ Ù…ÛŒâ€ŒØ´Ù† ØªØ§ Ø±ÙˆÛŒ Ù¾Ø§Ù¾â€ŒØ¢Ù¾ Ù†ÛŒØ§Ù† */
    body.modal-open audio {
      visibility: hidden;
    }
    /* Ù¾Ø§Ù¾â€ŒØ¢Ù¾ Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù‡Ù…Ù‡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ø¨Ø§Ø´Ù‡ */
    .popup {
      z-index: 9999;
    }
    
  </style>
</head>
<body>

<header>ÛŒØ§Ø¯Ø¨ÙˆØ¯ Ù…Ø±Ø­ÙˆÙ… Ø³Ø±Ù‡Ù†Ú¯ Ù…Ø­Ù…Ø¯ ØµØ¯Ø§Ù‚Øª Ú©ÛŒØ´</header>

<!-- background voice -->
<audio id="bgVoice" preload="auto" src="audio/marhoom.mp3"></audio>

<!-- replay button (hidden until the voice ends) -->
<div id="replayContainer" style="display:none; text-align:center; margin-top:20px;">
  <button id="replayBtn" 
          style="background:#27ae60; color:white; border:none; padding:10px 20px; border-radius:10px; font-size:16px; cursor:pointer;">
    ğŸ” Ù¾Ø®Ø´ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØµØ¯Ø§
  </button>
</div>

  
<!-- Ú¯Ø§Ù„Ø±ÛŒ -->
<div class="gallery">
  <img src="images/photo1.jpg" class="active" alt="Ø¹Ú©Ø³ Û±">
  <img src="images/photo2.jpg" alt="Ø¹Ú©Ø³ Û²">
  <img src="images/photo3.jpg" alt="Ø¹Ú©Ø³ Û³">
  <img src="images/photo4.jpg" alt="Ø¹Ú©Ø³ Û´">

  <button class="nav prev" onclick="prevImage()">â€¹</button>
  <button class="nav next" onclick="nextImage()">â€º</button>
</div>

<!-- Ø²Ù†Ø¯Ú¯ÛŒâ€ŒÙ†Ø§Ù…Ù‡ -->
<div class="bio-section">
  <h2>Ø²Ù†Ø¯Ú¯ÛŒâ€ŒÙ†Ø§Ù…Ù‡ Ù…Ø±Ø­ÙˆÙ… Ø³Ø±Ù‡Ù†Ú¯ Ù…Ø­Ù…Ø¯ ØµØ¯Ø§Ù‚Øª Ú©ÛŒØ´</h2>
  <p>
    Ø§ÛŒØ´Ø§Ù† ØªØ§Ø±ÛŒØ® Û±Û¶ Ø§Ø³ÙÙ†Ø¯ Ø¯Ù‡Ù‡â€ŒÛŒ Ø¨ÛŒØ³ØªØŒ Ø¯Ø± Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡â€ŒÛŒ Ù…Ø°Ù‡Ø¨ÛŒ Ú†Ø´Ù… Ø¨Ù‡ Ø¬Ù‡Ø§Ù† Ú¯Ø´ÙˆØ¯Ù†Ø¯. Ø¨Ø±Ø§ÛŒ ØªØ­ØµÛŒÙ„ Ø¯Ø± Ø±Ø´ØªÙ‡â€ŒÛŒ Ø±ÛŒØ§Ø¶ÛŒØŒ Ø¯Ø± Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ù‡Ø±Ø§ØªÛŒØŒ Ø¨Ù‡ Ø§ØµÙÙ‡Ø§Ù† Ø¢Ù…Ø¯Ù†Ø¯ Ùˆ Ù…Ø´ØºÙˆÙ„ Ø¨Ù‡ ØªØ­ØµÛŒÙ„ Ø´Ø¯Ù†Ø¯ Ùˆ Ø¨Ø¹Ø¯ Ø§Ø² Ø¯ÛŒÙ¾Ù„Ù… ÙˆØ§Ø±Ø¯ Ø§Ø±ØªØ´ Ø´Ø¯Ù†Ø¯.<br>
    Ø§ÛŒØ´Ø§Ù† Ø¯Ø± Ø¯ÙˆØ±Ø§Ù† Ø§Ù†Ù‚Ù„Ø§Ø¨ Ù‡Ù… Ø¯Ø± Ø§Ø±ØªØ´ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ùˆ Ø¯Ø± Û¸ Ø³Ø§Ù„ Ø¯ÙØ§Ø¹ Ù…Ù‚Ø¯Ø³ØŒ Ø¯Ø± Ø¬Ø¨Ù‡Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ù‚ Ø¹Ù„ÛŒÙ‡ Ø¨Ø§Ø·Ù„ Ø­Ø¶ÙˆØ± ÙØ¹Ø§Ù„ Ø¯Ø§Ø´ØªÙ†Ø¯.<br>
    Ø³Ø±Ù‡Ù†Ú¯ Ø¯Ø± ØªØ§Ø±ÛŒØ® Û±Û· Ø¯ÛŒ Û·Û· Ù‡Ù…Ø³Ø± Ùˆ ÙØ±Ø²Ù†Ø¯ Ø¨Ø±ÙˆÙ…Ù†Ø¯Ø´Ø§Ù† Ø±Ø§ Ø·ÛŒ ÛŒÚ© ØªØµØ§Ø¯Ù Ø§Ø² Ø¯Ø³Øª Ø¯Ø§Ø¯Ù†Ø¯ØŒ Ø¨Ø§ Ø§ÛŒÙ† Ú©Ù‡ ØºÙ… Ø¨Ø²Ø±Ú¯ÛŒ Ø¯Ø± Ø³ÛŒÙ†Ù‡ Ø¯Ø§Ø´ØªÙ†Ø¯ Ø§Ù…Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ù„Ø¨Ø®Ù†Ø¯ Ø¨Ø± Ù„Ø¨ Ø¯Ø§Ø´ØªÙ†Ø¯ Ùˆ Ø¨Ù‡ Ø¯ÛŒÚ¯Ø±Ø§Ù† Ø±ÙˆØ­ÛŒÙ‡ Ù…ÛŒâ€ŒØ¯Ø§Ø¯Ù†Ø¯.<br>
    Ø§ÛŒØ´Ø§Ù† Ø®Ø§Ø¯Ù… Ø§Ù‡Ù„ Ø¨ÛŒØª Ø¨ÙˆØ¯Ù†Ø¯ Ùˆ Ù‡ÛŒÚ†ÙˆÙ‚Øª Ø§Ø² Ú©Ù…Ú© Ø¨Ù‡ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯Ø§Ù† Ø¯Ø±ÛŒØº Ù†Ù…ÛŒâ€ŒÚ©Ø±Ø¯Ù†Ø¯.<br>
    Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¯Ù„Ù†Ø´ÛŒÙ† Ø§ÛŒØ´Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ³ØªØ§Ù† Ùˆ Ø¢Ø´Ù†Ø§ÛŒØ§Ù†ØŒ Ù‡Ø±Ø±ÙˆØ² ØµØ¨Ø­ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´Ø¯ ØªØ§ Ø¨Ù‡ Ù‡Ù…Ù‡ Ø±ÙˆØ­ÛŒÙ‡ Ø¨Ø¯Ù‡Ù†Ø¯ Ùˆ Ø§ÛŒÙ†Ú¯ÙˆÙ†Ù‡ Ù‡Ø±Ú©Ø³ Ø¨ØªÙˆØ§Ù†Ø¯ Ø¨Ø§ Ø§Ù†Ø±Ú˜ÛŒ Ù…Ø¶Ø§Ø¹Ù Ø±ÙˆØ²Ø´ Ø±Ø§ Ø¢ØºØ§Ø² Ú©Ù†Ø¯.<br>
    Ø±ÙˆØ­Ø´ Ø´Ø§Ø¯ Ùˆ ÛŒØ§Ø¯Ø´ Ú¯Ø±Ø§Ù…ÛŒ Ø¨Ø§Ø¯ ğŸŒ¹
  </p>
</div>

<!-- Ø³ÙˆØ±Ù‡â€ŒÙ‡Ø§ Ø²ÛŒØ± Ù‡Ù… -->

  
<!-- ØµÙ„ÙˆØ§Øª -->
<div class="salavat-section">
  <h3>ØµÙ„ÙˆØ§Øª</h3>
  <div class="salavat-buttons">
    <!-- <button class="count-btn" onclick="increaseCount('salavat')">Ø«Ø¨Øª ØµÙ„ÙˆØ§Øª ØªÚ©ÛŒ</button> -->
    <button class="count-btn" onclick="setCounter('salavat')">Ø«Ø¨Øª ØµÙ„ÙˆØ§Øª ØªÚ©ÛŒ</button>
    <button class="count-btn" onclick="openPopup()">Ø«Ø¨Øª ØµÙ„ÙˆØ§Øª ØªØ¹Ø¯Ø§Ø¯</button>
  </div>
  <div class="counter" id="salavat">ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª: Û°</div>
</div>

<!-- Ù¾Ø§Ù¾â€ŒØ¢Ù¾ -->
<div class="popup" id="popup">
  <div class="popup-content">
    <h4>ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª</h4>
    <p>ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
    <input type="number" id="salavatCountInput" placeholder="Ù…Ø«Ù„Ø§Ù‹ 100">
    <div class="popup-buttons">
      <!-- <button class="btn-green" onclick="submitSalavatCount()">Ø«Ø¨Øª ØµÙ„ÙˆØ§Øª</button> -->
      <button class="btn-green" onclick="setCounter('salavat', document.getElementById('salavatCountInput').value);closePopup();">Ø«Ø¨Øª ØµÙ„ÙˆØ§Øª</button>
      <button class="btn-gray" onclick="closePopup()">Ø¨Ø³ØªÙ† Ù…Ù†Ùˆ</button>
    </div>
  </div>
</div>
  
  <div class="audio-section">
  <h3>ÙØ§ØªØ­Ù‡</h3>
  <audio controls onplay="handlePlay('fatehe', this)">
    <source src="audio/fatehe.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('fatehe')">Ø«Ø¨Øª ÙØ§ØªØ­Ù‡</button> -->
  <button class="count-btn" onclick="setCounter('fatehe')">Ø«Ø¨Øª ÙØ§ØªØ­Ù‡</button>
  <div class="counter" id="fatehe">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø¢ÛŒØª Ø§Ù„Ú©Ø±Ø³ÛŒ</h3>
  <audio controls onplay="handlePlay('ayat', this)">
    <source src="audio/ayat.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('ayat')">Ø«Ø¨Øª Ø¢ÛŒØª Ø§Ù„Ú©Ø±Ø³ÛŒ</button> -->
  <button class="count-btn" onclick="setCounter('ayat')">Ø«Ø¨Øª Ø¢ÛŒØª Ø§Ù„Ú©Ø±Ø³ÛŒ</button>
  <div class="counter" id="ayat">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø³ÙˆØ±Ù‡ ÛŒØ³</h3>
  <audio controls onplay="handlePlay('yasin', this)">
    <source src="audio/yasin.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('yasin')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ ÛŒØ³</button> -->
  <button class="count-btn" onclick="setCounter('yasin')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ ÛŒØ³</button>
  <div class="counter" id="yasin">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø³ÙˆØ±Ù‡ ÙˆØ§Ù‚Ø¹Ù‡</h3>
  <audio controls onplay="handlePlay('vaqea', this)">
    <source src="audio/vaqea.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('vaqea')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ ÙˆØ§Ù‚Ø¹Ù‡</button> -->
  <button class="count-btn" onclick="setCounter('vaqea')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ ÙˆØ§Ù‚Ø¹Ù‡</button>
  <div class="counter" id="vaqea">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø³ÙˆØ±Ù‡ Ø§Ù„Ø±Ø­Ù…Ù†</h3>
  <audio controls onplay="handlePlay('rahman', this)">
    <source src="audio/rahman.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('rahman')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ Ø§Ù„Ø±Ø­Ù…Ù†</button> -->
  <button class="count-btn" onclick="setCounter('rahman')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ Ø§Ù„Ø±Ø­Ù…Ù†</button>
  <div class="counter" id="rahman">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø³ÙˆØ±Ù‡ Ù…Ù„Ú©</h3>
  <audio controls onplay="handlePlay('molk', this)">
    <source src="audio/molk.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('molk')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ Ù…Ù„Ú©</button> -->
  <button class="count-btn" onclick="setCounter('molk')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ Ù…Ù„Ú©</button>
  <div class="counter" id="molk">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø³ÙˆØ±Ù‡ Ù‚Ø¯Ø±</h3>
  <audio controls onplay="handlePlay('qadr', this)">
    <source src="audio/qadr.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('qadr')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ Ù‚Ø¯Ø±</button> -->
  <button class="count-btn" onclick="setCounter('qadr')">Ø«Ø¨Øª Ø³ÙˆØ±Ù‡ Ù‚Ø¯Ø±</button>
  <div class="counter" id="qadr">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>

<div class="audio-section">
  <h3>Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§</h3>
  <audio controls onplay="handlePlay('ashura', this)">
    <source src="audio/ashura.mp3" type="audio/mpeg">
  </audio>
  <!-- <button class="count-btn" onclick="increaseCount('ashura')">Ø«Ø¨Øª Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§</button> -->
  <button class="count-btn" onclick="setCounter('ashura')">Ø«Ø¨Øª Ø²ÛŒØ§Ø±Øª Ø¹Ø§Ø´ÙˆØ±Ø§</button>
  <div class="counter" id="ashura">ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: Û°</div>
</div>


<footer>
  Ø±ÙˆØ­Ø´ Ø´Ø§Ø¯ Ùˆ ÛŒØ§Ø¯Ø´ Ú¯Ø±Ø§Ù…ÛŒ ğŸŒ¹
  <p>Ø·Ø±Ø§Ø­: Ø¹Ù„ÛŒÙ…Ø­Ù…Ø¯ ØµØ¯Ø§Ù‚Øª Ú©ÛŒØ´ <br>
  Ø§ÛŒÙ…ÛŒÙ„: alimohamad.sedaghatkish@gmail.com</p>
</footer>

<script>
  // Ú¯Ø§Ù„Ø±ÛŒ
  let index = 0;
  const images = document.querySelectorAll(".gallery img");
  function showImage(i) {
    images.forEach(img => img.classList.remove("active"));
    images[i].classList.add("active");
  }
  function nextImage() {
    index = (index + 1) % images.length;
    showImage(index);
  }
  function prevImage() {
    index = (index - 1 + images.length) % images.length;
    showImage(index);
  }

  // Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡
  // Counter API (Cloudflare Workers)
  const API_URL = "https://cool-snowflake-d2fe.alimohamad-sedaghatkish.workers.dev/";
  // Get counter value by key
  async function getCounter(key) {
    try {
      const response = await fetch(API_URL + "?key=" + key, { method: "GET" });
      const data = await response.json();
      return data;
    } catch (err) {
      console.error("Error fetching counter:", err);
      return null;
    }
  }
  // Set counter value by key
  async function setCounter(key, val=1) {
    try {
      const response = await fetch(API_URL + "?key=" + key + "&val=" + val, { 
        method: "POST",
        headers: { "Content-Type": "application/json" }
      });
      const data = await response.json();
      const el = document.getElementById(key);
      if (el) el.innerText = key === 'salavat' ? `ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª: ${data.count}` : `ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: ${data.count}`;
    } catch (err) {
      console.error("Error setting counter:", err);
      return null;
    }
  }

  //const counts = JSON.parse(localStorage.getItem("counts")) || {
  //  fatehe: 0, ayat: 0, yasin: 0, vaqea: 0, rahman: 0, molk: 0, qadr: 0, ashura: 0, salavat: 0
  //};
  async function updateDisplay() {
    for (const key of ['salavat', 'fatehe', 'ayat', 'yasin', 'vaqea', 'rahman', 'molk', 'qadr', 'ashura']) {
      const data = await getCounter(key);
      let count = data.count;
      const el = document.getElementById(key);
      if (el) el.innerText = key === 'salavat' ? `ØªØ¹Ø¯Ø§Ø¯ ØµÙ„ÙˆØ§Øª: ${count}` : `ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø¦Øª: ${count}`;
    }
  }
  //function increaseCount(key) {
  //  counts[key]++;
  //  localStorage.setItem("counts", JSON.stringify(counts));
  //  updateDisplay();
  //}
  function handlePlay(key, audioElement) {
    audioElement.onended = () => {
      //increaseCount(key);
      setCounter(key);
    };
  }

  // ØµÙ„ÙˆØ§Øª Ù¾Ø§Ù¾â€ŒØ¢Ù¾
  const popup = document.getElementById("popup");
  function openPopup() { popup.style.display = "flex";
                       document.body.classList.add("modal-open"); // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù¾Ù„ÛŒØ±Ù‡Ø§
                       }
  function closePopup() { popup.style.display = "none";
                        document.body.classList.remove("modal-open"); // Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ†Ø¯Ù† Ù¾Ù„ÛŒØ±Ù‡Ø§
                        }
  //function submitSalavatCount() {
  //  const val = parseInt(document.getElementById("salavatCountInput").value);
  //  if (!isNaN(val) && val > 0) {
  //    counts.salavat += val;
  //    localStorage.setItem("counts", JSON.stringify(counts));
  //  }
  //  closePopup();
  //}

  updateDisplay();

  /* ========== Background voice autoplay + replay button (always visible after stop) ========== */
const bgVoice = document.getElementById('bgVoice');
const replayContainer = document.getElementById('replayContainer');
const replayBtn = document.getElementById('replayBtn');
const allAudios = document.querySelectorAll('.audio-section audio'); // ØªÙ…Ø§Ù… ÙˆÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ±Ù‡â€ŒÙ‡Ø§

// ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ù¾Ø®Ø´ Ø®ÙˆØ¯Ú©Ø§Ø± ØµØ¯Ø§ÛŒ Ù…Ø±Ø­ÙˆÙ…
async function tryAutoplayBgVoice() {
  try {
    await bgVoice.play();
    console.log('Background voice started playing.');
  } catch (err) {
    console.log('Autoplay blocked by browser. Waiting for user interaction...');
    document.body.addEventListener('click', handleFirstInteraction, { once: true });
  }
}

// ÙˆÙ‚ØªÛŒ ØµØ¯Ø§ÛŒ Ù…Ø±Ø­ÙˆÙ… ØªÙ…ÙˆÙ… Ø¨Ø´Ù‡ â†’ Ø¯Ú©Ù…Ù‡ Ù¾Ø®Ø´ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¸Ø§Ù‡Ø± Ø¨Ø´Ù‡
bgVoice.addEventListener('ended', () => {
  replayContainer.style.display = 'block';
});

// ÙˆÙ‚ØªÛŒ Ø¯Ú©Ù…Ù‡â€ŒÛŒ Ù¾Ø®Ø´ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ú©Ù„ÛŒÚ© Ø¨Ø´Ù‡ â†’ ØµØ¯Ø§ÛŒ Ù…Ø±Ø­ÙˆÙ… Ø§Ø² Ø§ÙˆÙ„ Ù¾Ø®Ø´ Ø¨Ø´Ù‡ Ùˆ Ø¯Ú©Ù…Ù‡ Ù¾Ù†Ù‡Ø§Ù† Ø´Ù‡
replayBtn.addEventListener('click', () => {
  stopAllSurahVoices(); // Ù‡Ù…Ù‡ ÙˆÙˆÛŒØ³â€ŒÙ‡Ø§ Ù‚Ø·Ø¹ Ø¨Ø´Ù†
  bgVoice.currentTime = 0;
  bgVoice.play();
  replayContainer.style.display = 'none';
});

// ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø± Ú©Ù„ÛŒÚ© Ú©Ø±Ø¯ â†’ ØµØ¯Ø§ÛŒ Ù…Ø±Ø­ÙˆÙ… Ø´Ø±ÙˆØ¹ Ø¨Ø´Ù‡
function handleFirstInteraction() {
  bgVoice.play();
}

// ØªØ§Ø¨Ø¹ Ù‚Ø·Ø¹ Ù‡Ù…Ù‡ ÙˆÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ±Ù‡â€ŒÙ‡Ø§
function stopAllSurahVoices() {
  allAudios.forEach(a => {
    a.pause();
    a.currentTime = 0;
  });
}

// ÙˆÙ‚ØªÛŒ Ù‡Ø± ÙˆÙˆÛŒØ³ÛŒ Ø§Ø² Ø³ÙˆØ±Ù‡â€ŒÙ‡Ø§ Ù¾Ù„ÛŒ Ø¨Ø´Ù‡ â†’ ØµØ¯Ø§ÛŒ Ù…Ø±Ø­ÙˆÙ… Ù‚Ø·Ø¹ Ùˆ Ø¯Ú©Ù…Ù‡ Ù¾Ø®Ø´ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¸Ø§Ù‡Ø± Ø´Ù‡
allAudios.forEach(audio => {
  audio.addEventListener('play', () => {
    bgVoice.pause();
    bgVoice.currentTime = 0;
    replayContainer.style.display = 'block'; // Ø¯Ú©Ù…Ù‡ Ù‡Ù…ÛŒØ´Ù‡ Ø¸Ø§Ù‡Ø± Ø´Ù‡ Ø¨Ø¹Ø¯ Ø§Ø² Ù‚Ø·Ø¹
    allAudios.forEach(a => {
      if (a !== audio) {
        a.pause();
        a.currentTime = 0;
      }
    });
  });
});

// Ø§Ú¯Ø± ØµØ¯Ø§ÛŒ Ù…Ø±Ø­ÙˆÙ… Ø¨Ù‡ Ù‡Ø± Ø¯Ù„ÛŒÙ„ÛŒ Ù‚Ø·Ø¹ Ø´Ø¯ â†’ Ø¯Ú©Ù…Ù‡ Ù¾Ø®Ø´ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¸Ø§Ù‡Ø± Ø¨Ø´Ù‡
bgVoice.addEventListener('pause', () => {
  replayContainer.style.display = 'block';
});

// Ø´Ø±ÙˆØ¹ Ø®ÙˆØ¯Ú©Ø§Ø± Ù¾Ø®Ø´ (Ø¯Ø± Ø­Ø¯ Ù…Ø¬Ø§Ø² Ù…Ø±ÙˆØ±Ú¯Ø±)
tryAutoplayBgVoice();

</script>  
</body>
</html>

